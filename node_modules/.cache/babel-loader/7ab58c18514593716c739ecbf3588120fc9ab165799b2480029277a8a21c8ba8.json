{"ast":null,"code":"import React,{useState,useCallback}from'react';import Navbar from'../Component/Navbar';import'./home.css';import{baseurl}from'../url';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Homepage=()=>{const[postMessage,setPostMessage]=useState('');const[responseMessage,setResponseMessage]=useState('');const handleSubmit=useCallback(async event=>{event.preventDefault();try{const token=localStorage.getItem('user')?JSON.parse(localStorage.getItem('user')).token:'';const response=await fetch(\"\".concat(baseurl,\"/msg/post\"),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)// Include the token in the Authorization header\n},body:JSON.stringify({postMessage}),credentials:'include'// Include credentials with each request\n});const data=await response.text();if(response.ok){setResponseMessage(data);setPostMessage('');// Clear the input field on successful post\n}else{setResponseMessage('Error: '+data);}}catch(error){setResponseMessage('Error: '+error.message);}},[postMessage]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"Homecontainer\",children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"home-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Share your thoughts\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"textarea\",{value:postMessage,onChange:e=>setPostMessage(e.target.value),placeholder:\"Write your message here...\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Post\"})]}),responseMessage&&/*#__PURE__*/_jsx(\"p\",{children:responseMessage})]})]})});};export default Homepage;","map":{"version":3,"names":["React","useState","useCallback","Navbar","baseurl","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Homepage","postMessage","setPostMessage","responseMessage","setResponseMessage","handleSubmit","event","preventDefault","token","localStorage","getItem","JSON","parse","response","fetch","concat","method","headers","body","stringify","credentials","data","text","ok","error","message","children","className","onSubmit","value","onChange","e","target","placeholder","required","type"],"sources":["C:/Users/nithi/Downloads/NewProjects/react-client/src/Home/homepage.jsx"],"sourcesContent":["import React, { useState, useCallback } from 'react';\r\nimport Navbar from '../Component/Navbar';\r\nimport './home.css';\r\nimport { baseurl } from '../url';\r\n\r\nconst Homepage=() => {\r\n    const [postMessage, setPostMessage]=useState( '' );\r\n    const [responseMessage, setResponseMessage]=useState( '' );\r\n\r\n    const handleSubmit=useCallback( async ( event ) => {\r\n        event.preventDefault();\r\n        try {\r\n            const token=localStorage.getItem( 'user' )? JSON.parse( localStorage.getItem( 'user' ) ).token:'';\r\n            const response=await fetch( `${ baseurl }/msg/post`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `Bearer ${ token }` // Include the token in the Authorization header\r\n                },\r\n                body: JSON.stringify( { postMessage } ),\r\n                credentials: 'include', // Include credentials with each request\r\n            } );\r\n            const data=await response.text();\r\n            if ( response.ok ) {\r\n                setResponseMessage( data );\r\n                setPostMessage( '' ); // Clear the input field on successful post\r\n            } else {\r\n                setResponseMessage( 'Error: '+data );\r\n            }\r\n        } catch ( error ) {\r\n            setResponseMessage( 'Error: '+error.message );\r\n        }\r\n    }, [postMessage] );\r\n\r\n    return (\r\n        <>\r\n            <div className='Homecontainer'>\r\n                <Navbar />\r\n                <div className='home-container'>\r\n\r\n                    <h1>Share your thoughts</h1>\r\n                    <form onSubmit={handleSubmit}>\r\n                        <textarea\r\n                            value={postMessage}\r\n                            onChange={( e ) => setPostMessage( e.target.value )}\r\n                            placeholder='Write your message here...'\r\n                            required\r\n                        />\r\n                        <button type='submit'>Post</button>\r\n                    </form>\r\n                    {responseMessage&&<p>{responseMessage}</p>}\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Homepage;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,WAAW,KAAQ,OAAO,CACpD,MAAO,CAAAC,MAAM,KAAM,qBAAqB,CACxC,MAAO,YAAY,CACnB,OAASC,OAAO,KAAQ,QAAQ,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEjC,KAAM,CAAAC,QAAQ,CAACA,CAAA,GAAM,CACjB,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAACZ,QAAQ,CAAE,EAAG,CAAC,CAClD,KAAM,CAACa,eAAe,CAAEC,kBAAkB,CAAC,CAACd,QAAQ,CAAE,EAAG,CAAC,CAE1D,KAAM,CAAAe,YAAY,CAACd,WAAW,CAAE,KAAQ,CAAAe,KAAK,EAAM,CAC/CA,KAAK,CAACC,cAAc,CAAC,CAAC,CACtB,GAAI,CACA,KAAM,CAAAC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAE,MAAO,CAAC,CAAEC,IAAI,CAACC,KAAK,CAAEH,YAAY,CAACC,OAAO,CAAE,MAAO,CAAE,CAAC,CAACF,KAAK,CAAC,EAAE,CACjG,KAAM,CAAAK,QAAQ,CAAC,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAMtB,OAAO,cAAc,CACjDuB,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACL,cAAc,CAAE,kBAAkB,CAClC,eAAe,WAAAF,MAAA,CAAaP,KAAK,CAAI;AACzC,CAAC,CACDU,IAAI,CAAEP,IAAI,CAACQ,SAAS,CAAE,CAAElB,WAAY,CAAE,CAAC,CACvCmB,WAAW,CAAE,SAAW;AAC5B,CAAE,CAAC,CACH,KAAM,CAAAC,IAAI,CAAC,KAAM,CAAAR,QAAQ,CAACS,IAAI,CAAC,CAAC,CAChC,GAAKT,QAAQ,CAACU,EAAE,CAAG,CACfnB,kBAAkB,CAAEiB,IAAK,CAAC,CAC1BnB,cAAc,CAAE,EAAG,CAAC,CAAE;AAC1B,CAAC,IAAM,CACHE,kBAAkB,CAAE,SAAS,CAACiB,IAAK,CAAC,CACxC,CACJ,CAAE,MAAQG,KAAK,CAAG,CACdpB,kBAAkB,CAAE,SAAS,CAACoB,KAAK,CAACC,OAAQ,CAAC,CACjD,CACJ,CAAC,CAAE,CAACxB,WAAW,CAAE,CAAC,CAElB,mBACIN,IAAA,CAAAI,SAAA,EAAA2B,QAAA,cACI7B,KAAA,QAAK8B,SAAS,CAAC,eAAe,CAAAD,QAAA,eAC1B/B,IAAA,CAACH,MAAM,GAAE,CAAC,cACVK,KAAA,QAAK8B,SAAS,CAAC,gBAAgB,CAAAD,QAAA,eAE3B/B,IAAA,OAAA+B,QAAA,CAAI,qBAAmB,CAAI,CAAC,cAC5B7B,KAAA,SAAM+B,QAAQ,CAAEvB,YAAa,CAAAqB,QAAA,eACzB/B,IAAA,aACIkC,KAAK,CAAE5B,WAAY,CACnB6B,QAAQ,CAAIC,CAAC,EAAM7B,cAAc,CAAE6B,CAAC,CAACC,MAAM,CAACH,KAAM,CAAE,CACpDI,WAAW,CAAC,4BAA4B,CACxCC,QAAQ,MACX,CAAC,cACFvC,IAAA,WAAQwC,IAAI,CAAC,QAAQ,CAAAT,QAAA,CAAC,MAAI,CAAQ,CAAC,EACjC,CAAC,CACNvB,eAAe,eAAER,IAAA,MAAA+B,QAAA,CAAIvB,eAAe,CAAI,CAAC,EACzC,CAAC,EACL,CAAC,CACR,CAAC,CAEX,CAAC,CAED,cAAe,CAAAH,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}