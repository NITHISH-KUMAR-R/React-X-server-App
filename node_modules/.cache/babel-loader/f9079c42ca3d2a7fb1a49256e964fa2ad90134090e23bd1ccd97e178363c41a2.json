{"ast":null,"code":"import React,{useState,useCallback}from\"react\";import{useNavigate}from'react-router-dom';import axios from'axios';import'./login.css';// Import the custom CSS\nimport{baseurl}from\"../url\";import axiosInstance from\"../axiosConfig\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";axios.defaults.withCredentials=true;// Ensure cookies are sent with each request\nconst Login=()=>{const[isLoginMode,setIsLoginMode]=useState(true);const[formData,setFormData]=useState({username:'',email:'',password:''});const[successMessage,setSuccessMessage]=useState('');const[errorMessage,setErrorMessage]=useState('');// Add error message state\nconst handleInputChange=useCallback(e=>{const{name,value}=e.target;setFormData(prevState=>({...prevState,[name]:value}));},[]);const navigate=useNavigate();const handleLogin=async()=>{try{const response=await axiosInstance.post(\"\".concat(baseurl,\"/user/login\"),{email:formData.email,password:formData.password});console.log(\"Login successful:\",response.data);// Logged in successfully\nlocalStorage.setItem('user',JSON.stringify(response.data));// Set the success message\nsetSuccessMessage('Login successful! Redirecting to homepage...');// Clear any previous error message\nsetErrorMessage('');setTimeout(()=>{// Redirect to homepage\nnavigate('/homepage');},2000);// Delay for 2 seconds before redirecting\n}catch(error){console.error(\"Login error:\",error);// Update error message state\nsetErrorMessage('Login unsuccessful. Please check your email and password.');// Clear the success message\nsetSuccessMessage('');}};const handleSignup=async()=>{try{const response=await axiosInstance.post(\"\".concat(baseurl,\"/reg/newUserReg\"),{name:formData.username,email:formData.email,password:formData.password});console.log(\"Signup successful:\",response.data);// Signed up successfully\nsetSuccessMessage('Signup successful! Redirecting to login page...');// Clear any previous error message\nsetErrorMessage('');setTimeout(()=>{// Refresh the page and navigate to the login page\nwindow.location.reload();// Refresh the page\nnavigate('/login');},2000);// Delay for 2 seconds before redirecting\n}catch(error){console.error(\"Signup error:\",error);// Update error message state\nsetErrorMessage('Signup unsuccessful. Please try again.');// Clear the success message\nsetSuccessMessage('');}};const handleSubmit=e=>{e.preventDefault();// Prevent the default form submission behavior\nsetErrorMessage('');// Clear previous error messages\nif(isLoginMode){handleLogin();}else{handleSignup();}};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"login-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-card\",children:[/*#__PURE__*/_jsx(\"h1\",{children:isLoginMode?'Login':'Signup'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[!isLoginMode&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"username\",value:formData.username,onChange:handleInputChange,name:\"username\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",value:formData.email,onChange:handleInputChange,name:\"email\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",value:formData.password,onChange:handleInputChange,name:\"password\",required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-submit\",children:isLoginMode?'Login':'Signup'})]}),successMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"success-message\",children:successMessage}),errorMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errorMessage}),\" \",/*#__PURE__*/_jsx(\"p\",{className:\"toggle-mode\",onClick:()=>setIsLoginMode(!isLoginMode),children:isLoginMode?'New User? Sign Up':'Already have an account? Login'})]})})});};export default Login;","map":{"version":3,"names":["React","useState","useCallback","useNavigate","axios","baseurl","axiosInstance","jsx","_jsx","jsxs","_jsxs","defaults","withCredentials","Login","isLoginMode","setIsLoginMode","formData","setFormData","username","email","password","successMessage","setSuccessMessage","errorMessage","setErrorMessage","handleInputChange","e","name","value","target","prevState","navigate","handleLogin","response","post","concat","console","log","data","localStorage","setItem","JSON","stringify","setTimeout","error","handleSignup","window","location","reload","handleSubmit","preventDefault","className","children","onSubmit","htmlFor","type","id","onChange","required","onClick"],"sources":["C:/Users/nithi/Downloads/NewProjects/react-client/src/Login/login.jsx"],"sourcesContent":["import React, { useState, useCallback } from \"react\";\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './login.css'; // Import the custom CSS\r\nimport { baseurl } from \"../url\";\r\nimport axiosInstance from \"../axiosConfig\";\r\n\r\naxios.defaults.withCredentials=true; // Ensure cookies are sent with each request\r\n\r\nconst Login=() => {\r\n    const [isLoginMode, setIsLoginMode]=useState( true );\r\n    const [formData, setFormData]=useState( {\r\n        username: '',\r\n        email: '',\r\n        password: ''\r\n    } );\r\n    const [successMessage, setSuccessMessage]=useState( '' );\r\n    const [errorMessage, setErrorMessage]=useState( '' ); // Add error message state\r\n\r\n    const handleInputChange=useCallback( ( e ) => {\r\n        const { name, value }=e.target;\r\n        setFormData( prevState => ( { ...prevState, [name]: value } ) );\r\n    }, [] );\r\n\r\n    const navigate=useNavigate();\r\n\r\n    const handleLogin=async () => {\r\n        try {\r\n            const response=await axiosInstance.post( `${ baseurl }/user/login`, {\r\n                email: formData.email,\r\n                password: formData.password\r\n            } );\r\n            console.log( \"Login successful:\", response.data ); // Logged in successfully\r\n            localStorage.setItem( 'user', JSON.stringify( response.data ) );\r\n            // Set the success message\r\n            setSuccessMessage( 'Login successful! Redirecting to homepage...' );\r\n            // Clear any previous error message\r\n            setErrorMessage( '' );\r\n            setTimeout( () => {\r\n                // Redirect to homepage\r\n                navigate( '/homepage' );\r\n            }, 2000 ); // Delay for 2 seconds before redirecting\r\n        } catch ( error ) {\r\n            console.error( \"Login error:\", error );\r\n            // Update error message state\r\n            setErrorMessage( 'Login unsuccessful. Please check your email and password.' );\r\n            // Clear the success message\r\n            setSuccessMessage( '' );\r\n        }\r\n    };\r\n\r\n    const handleSignup=async () => {\r\n        try {\r\n            const response=await axiosInstance.post( `${ baseurl }/reg/newUserReg`, {\r\n                name: formData.username,\r\n                email: formData.email,\r\n                password: formData.password\r\n            } );\r\n            console.log( \"Signup successful:\", response.data ); // Signed up successfully\r\n            setSuccessMessage( 'Signup successful! Redirecting to login page...' );\r\n            // Clear any previous error message\r\n            setErrorMessage( '' );\r\n            setTimeout( () => {\r\n                // Refresh the page and navigate to the login page\r\n                window.location.reload(); // Refresh the page\r\n                navigate( '/login' );\r\n            }, 2000 ); // Delay for 2 seconds before redirecting\r\n        } catch ( error ) {\r\n            console.error( \"Signup error:\", error );\r\n            // Update error message state\r\n            setErrorMessage( 'Signup unsuccessful. Please try again.' );\r\n            // Clear the success message\r\n            setSuccessMessage( '' );\r\n        }\r\n    };\r\n\r\n    const handleSubmit=( e ) => {\r\n        e.preventDefault(); // Prevent the default form submission behavior\r\n        setErrorMessage( '' ); // Clear previous error messages\r\n        if ( isLoginMode ) {\r\n            handleLogin();\r\n        } else {\r\n            handleSignup();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <div className=\"login-container\">\r\n                <div className=\"login-card\">\r\n                    <h1>{isLoginMode? 'Login':'Signup'}</h1>\r\n                    <form onSubmit={handleSubmit}>\r\n                        {!isLoginMode&&(\r\n                            <div className=\"form-group\">\r\n                                <label htmlFor=\"username\">Username</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    id=\"username\"\r\n                                    value={formData.username}\r\n                                    onChange={handleInputChange}\r\n                                    name=\"username\"\r\n                                    required\r\n                                />\r\n                            </div>\r\n                        )}\r\n\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"email\">Email</label>\r\n                            <input\r\n                                type=\"email\"\r\n                                id=\"email\"\r\n                                value={formData.email}\r\n                                onChange={handleInputChange}\r\n                                name=\"email\"\r\n                                required\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"password\">Password</label>\r\n                            <input\r\n                                type=\"password\"\r\n                                id=\"password\"\r\n                                value={formData.password}\r\n                                onChange={handleInputChange}\r\n                                name=\"password\"\r\n                                required\r\n                            />\r\n                        </div>\r\n                        <button type=\"submit\" className=\"btn-submit\">\r\n                            {isLoginMode? 'Login':'Signup'}\r\n                        </button>\r\n                    </form>\r\n                    {successMessage&&<p className=\"success-message\">{successMessage}</p>}\r\n                    {errorMessage&&<p className=\"error-message\">{errorMessage}</p>} {/* Display error message */}\r\n                    <p className=\"toggle-mode\" onClick={() => setIsLoginMode( !isLoginMode )}>\r\n                        {isLoginMode? 'New User? Sign Up':'Already have an account? Login'}\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}